
proto enumerate

def enumerate/map(cb)
  let res = []
  for x in this.make_iter()
    res.push!(cb(x))
  end

  res
end

def enumerate/take_while(cb)
  let iter = this.make_iter()
  let next = iter.next()
  let res = []
  while next[0] == :ok and cb(next[1])
    res.push!(next[1])
    next = iter.next()
  end

  res
end

